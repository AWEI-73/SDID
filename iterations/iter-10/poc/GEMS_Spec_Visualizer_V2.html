<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEMS å°ˆæ¡ˆå°èˆªåœ°åœ– | Iteration 10</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-color: #0d1117;
            --panel-bg: rgba(22, 27, 34, 0.9);
            --sidebar-bg: #010409;
            --accent-color: #58a6ff;
            --accent-gradient: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%);
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: rgba(240, 246, 252, 0.1);
            --card-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', 'Microsoft JhengHei', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            display: flex;
        }

        /* Sidebar - Navigation with plain icons */
        #sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            z-index: 100;
        }

        #sidebar h1 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #fff;
        }

        .nav-group-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin: 1.5rem 0 0.8rem 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-item {
            padding: 12px 16px;
            margin-bottom: 4px;
            border-radius: 10px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        .nav-item.active {
            background: var(--accent-gradient);
            color: #fff;
            box-shadow: 0 0 20px rgba(31, 111, 235, 0.4);
        }

        /* Main Area */
        #main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .section-view {
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .section-view.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Dashboard Grid */
        .grid-layout {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card {
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
        }

        .card-full {
            grid-column: span 2;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.8rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Plain Language Descriptions */
        .plain-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        /* Tech Stack Tags */
        .tag-box {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tag {
            background: #161b22;
            border: 1px solid var(--border-color);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--accent-color);
        }

        /* Mermaid Styling Overrides */
        .mermaid {
            background: transparent;
            padding: 10px;
            border-radius: 8px;
            overflow: auto;
            display: flex;
            justify-content: center;
        }

        /* Module Implementation View */
        .room-unit {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .room-title {
            font-size: 1.1rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .appliance {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 1rem;
            border-left: 3px solid var(--border-color);
        }

        .appliance-label {
            font-weight: 600;
            color: #fff;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        .part-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .part-item {
            display: grid;
            grid-template-columns: 180px 1fr 150px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            font-size: 0.85rem;
            align-items: center;
        }

        .badge-essential {
            color: #f85149;
            border: 1px solid #f85149;
            font-size: 0.65rem;
            padding: 1px 5px;
            border-radius: 3px;
        }

        .badge-utility {
            color: #3fb950;
            border: 1px solid #3fb950;
            font-size: 0.65rem;
            padding: 1px 5px;
            border-radius: 3px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }
    </style>
</head>

<body>

    <nav id="sidebar">
        <h1><span>ğŸ </span> GEMS å°ˆæ¡ˆå°è¦½</h1>

        <div class="nav-group-label">ç¬¬ä¸€å±¤ï¼šåŸºç¤å»ºæ</div>
        <div class="nav-item active" onclick="showView('ground-floor')">
            <span>ï¿½ï¸</span> æˆ¿å±‹çµæ§‹èˆ‡ç®¡ç·š
        </div>

        <div class="nav-group-label">ç¬¬äºŒå±¤ï¼šå®¤å…§é…ç½®</div>
        <div class="nav-item" onclick="showView('interior')">
            <span>ğŸšª</span> æˆ¿é–“è©³æƒ… (Modules)
        </div>
        <div class="nav-item" onclick="showView('logic-flow')">
            <span>ğŸ”—</span> ä¸²è¯é‚è¼¯ (Stories)
        </div>

        <div
            style="margin-top: auto; padding: 10px; font-size: 0.75rem; color: var(--text-secondary); background: rgba(255,255,255,0.02); border-radius: 8px;">
            ğŸ’ è¦æ ¼æ›¸ V2.0<br>
            é€™æ˜¯ä¸€ä»½è®“å¤§å®¶éƒ½èƒ½çœ‹æ‡‚çš„äººè©±è¦æ ¼æ–‡ä»¶ã€‚
        </div>
    </nav>

    <main id="main-content">

        <!-- SECTION 1: Ground Floor (Real Visuals) -->
        <section id="ground-floor" class="section-view active">
            <div class="grid-layout">
                <!-- Tech Stack Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ—ï¸ æˆ¿å±‹å»ºæ (Technology Stack)</div>
                    </div>
                    <p class="plain-desc">é€™é–“å°ˆæ¡ˆæˆ¿å­ä½¿ç”¨äº†ä»¥ä¸‹æŠ€è¡“æ‰“é€ ï¼Œç¢ºä¿çµæ§‹ç©©å›ºä¸”åŠŸèƒ½é½Šå…¨ï¼š</p>
                    <div class="tag-box">
                        <div class="tag">TypeScript (å»ºç¯‰éª¨æ¶)</div>
                        <div class="tag">Supabase (åœ°åŸºè³‡æ–™åº«)</div>
                        <div class="tag">Jest (å“è³ªé©—æ”¶)</div>
                        <div class="tag">Mermaid (è—åœ–è¦–è¦º)</div>
                    </div>
                </div>

                <!-- Database Card (Implemneted Mermaid) -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ—„ï¸ åœ°ä¸‹æ°´ç®¡åˆ†å¸ƒ (Database ER)</div>
                    </div>
                    <p class="plain-desc">è³‡æ–™åœ¨åœ°ä¸‹å¦‚ä½•ä¸²æ¥ï¼Ÿé€™è£¡å‘ˆç¾äº†æ ¸å¿ƒè³‡æ–™è¡¨çš„é—œè¯è¦–åœ–ï¼š</p>
                    <div class="mermaid">
                        erDiagram
                        PROJECT ||--o{ ITERATION : contains
                        ITERATION ||--o{ STORY : includes
                        PROJECT {
                        string name
                        string path
                        }
                        ITERATION {
                        int id
                        string label
                        }
                        STORY {
                        string id
                        string desc
                        }
                    </div>
                </div>

                <!-- Structure Card (Implemented Mermaid) -->
                <div class="card card-full">
                    <div class="card-header">
                        <div class="card-title">ğŸ—ºï¸ å…¨å±‹æ ¼å±€åœ– (Module Structure)</div>
                    </div>
                    <p class="plain-desc">å°ˆæ¡ˆç”±å“ªäº›å¤§æˆ¿é–“ (Modules) çµ„æˆï¼Ÿä»¥åŠå®ƒå€‘å½¼æ­¤çš„é€šè¡Œé—œä¿‚ï¼š</p>
                    <div class="mermaid">
                        graph LR
                        Core[ğŸ§  æ ¸å¿ƒå¤§è…¦ Core] --> Viz[ğŸ¨ è¦–è¦ºæ•ˆæœ Viz]
                        Core --> Scan[ğŸ” æƒæå·¥å…· Scan]
                        Scan --> DB[(ğŸ—„ï¸ è³‡æ–™åœ°åŸº DB)]
                        Dashboard[ğŸ’» æ§åˆ¶é¢æ¿ Dash] --> Core

                        style Core fill:#1f6feb,stroke:#fff,color:#fff
                        style Dashboard fill:#238636,stroke:#fff,color:#fff
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: Interior Details (Plain Language Implementation) -->
        <section id="interior" class="section-view">
            <h2 style="margin-bottom: 1.5rem;">ğŸšª æˆ¿é–“ç´°éƒ¨å…§å®¹ (å„æ¨¡çµ„å‡½å¼è©³æƒ…)</h2>
            <p class="plain-desc" style="margin-top:-1rem; margin-bottom: 2rem;">é€²å…¥æ¯å€‹æˆ¿é–“ï¼ŒæŸ¥çœ‹è£¡é¢æœ‰å“ªäº›è¨­å‚™ (Scripts) ä»¥åŠå®ƒå€‘çš„å…·é«”åŠŸèƒ½é›¶ä»¶
                (Functions)ã€‚</p>

            <!-- Example Module: Core -->
            <div class="room-unit">
                <div class="room-title">ğŸ’¡ æ ¸å¿ƒå¤§è…¦å®¤ (Core Module)</div>
                <p class="plain-desc">è² è²¬è™•ç†æ•´é–“æˆ¿å­çš„åŸºæœ¬é‚è¼¯ã€æª”æ¡ˆè®€å–èˆ‡ç‹€æ…‹åˆ¤æ–·ã€‚</p>

                <!-- Script 1: report-reader -->
                <div class="appliance">
                    <div class="appliance-label">ğŸ“– å ±å‘Šé–±è®€è¨­å‚™<br>(report-reader.ts)</div>
                    <div class="part-list">
                        <div class="part-item">
                            <span style="font-weight:600;">è®€å–ä¸¦è§£è®€å ±å‘Š</span>
                            <span style="color:var(--text-secondary);">å°‡åŸå§‹è³‡æ–™è½‰æ›ç‚ºç³»çµ±çœ‹å¾—æ‡‚çš„æ ¼å¼ã€‚</span>
                            <span class="badge-essential" style="text-align:center;">ğŸ”´ å¿…é ˆå…·å‚™ (P0)</span>
                        </div>
                        <div class="part-item">
                            <span style="font-weight:600;">ç¢ºèªæª”æ¡ˆè·¯å¾‘</span>
                            <span style="color:var(--text-secondary);">ç¢ºä¿è¦è®€å–çš„å ±å‘Šæª”æ¡ˆä½åœ¨æ­£ç¢ºçš„ä½ç½®ã€‚</span>
                            <span class="badge-utility" style="text-align:center;">ğŸŸ¢ é€šç”¨åŠŸèƒ½ (P2)</span>
                        </div>
                    </div>
                </div>

                <!-- Script 2: status-detector -->
                <div class="appliance">
                    <div class="appliance-label">ğŸš¦ ç‹€æ…‹åµæ¸¬æ„Ÿæ‡‰å™¨<br>(status-detector.ts)</div>
                    <div class="part-list">
                        <div class="part-item">
                            <span style="font-weight:600;">æª¢æŸ¥ç•¶å‰é€²åº¦</span>
                            <span style="color:var(--text-secondary);">ç¢ºèªæˆ¿å­(å°ˆæ¡ˆ)ç¾åœ¨è“‹åˆ°ç¬¬å¹¾å±¤äº†ã€‚</span>
                            <span class="badge-essential" style="text-align:center;">ğŸ”´ å¿…é ˆå…·å‚™ (P0)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Example Module: Scan -->
            <div class="room-unit">
                <div class="room-title">ğŸ” å®‰å…¨æª¢æŸ¥å®¤ (Scan Module)</div>
                <p class="plain-desc">è² è²¬å°å…¨å±‹é€²è¡Œåˆè¦æ€§æª¢æŸ¥ï¼Œç¢ºä¿æ¯ä¸€å¯¸éƒ½ç¬¦åˆæ¨™æº–ã€‚</p>

                <div class="appliance">
                    <div class="appliance-label">ğŸ‘® é–€æ§ç®¡ç†å“¡<br>(scan-gate.cjs)</div>
                    <div class="part-list">
                        <div class="part-item">
                            <span style="font-weight:600;">åŸ·è¡Œå…¨æ–¹ä½æƒæ</span>
                            <span style="color:var(--text-secondary);">è‡ªå‹•å·¡æª¢æ‰€æœ‰æ¨™ç±¤èˆ‡æ¸¬è©¦ï¼Œä¸¦ç”¢å‡ºå¥åº·å ±å‘Šã€‚</span>
                            <span class="badge-essential" style="text-align:center;">ğŸ”´ å¿…é ˆå…·å‚™ (P0)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: Logic Flow (Business stories) -->
        <section id="logic-flow" class="section-view">
            <h2 style="margin-bottom: 1.5rem;">ğŸ”— ä¸²è¯é‚è¼¯ï¼šæˆ¿å­è£¡çš„æ•…äº‹ (Business Stories)</h2>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ“– æ•…äº‹ç·šï¼šå°ˆæ¡ˆåœ°åœ–è‡ªå‹•ç”¢å‡º (Story-10.0)</div>
                </div>
                <p class="plain-desc">é€™å€‹æ•…äº‹æè¿°äº†ç³»çµ±å¦‚ä½•å¾ç„¡åˆ°æœ‰ï¼Œå°‡æ‚¨çš„ç¨‹å¼ç¢¼è‡ªå‹•è½‰åŒ–ç‚ºé€™ä»½ç²¾ç¾åœ°åœ–çš„éç¨‹ã€‚</p>
                <div style="background: rgba(0,0,0,0.5); padding: 1rem; border-radius: 8px; font-size: 0.9rem;">
                    <div style="margin-bottom: 10px;">ğŸ‘£ é‹ä½œæ­¥é©Ÿï¼š</div>
                    <ol style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                        <li>åµæ¸¬å°ˆæ¡ˆä¸­çš„ GEMS æ¨™ç±¤ã€‚</li>
                        <li>æå–è³‡æ–™åº« (Schema) èˆ‡ æ¨¡çµ„ (Structure) çš„åŸå§‹è³‡æ–™ã€‚</li>
                        <li>é€é <span style="color:#fff;">spec-generator</span> é€²è¡Œæ“¬äººåŒ–èªæ³•è½‰æ›ã€‚</li>
                        <li>æ¸²æŸ“æ‚¨ç¾åœ¨çœ‹åˆ°çš„é€™ä»½è¦–è¦ºåŒ–åœ°åœ–ã€‚</li>
                    </ol>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            securityLevel: 'loose',
            themeVariables: {
                primaryColor: '#1f6feb',
                primaryTextColor: '#fff',
                lineColor: '#58a6ff',
                fontFamily: 'Outfit'
            }
        });

        function showView(viewId) {
            // Update nav state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // Toggle view visibility
            document.querySelectorAll('.section-view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId).classList.add('active');

            // Re-render mermaid if it was hidden
            mermaid.init(undefined, ".mermaid");
        }
    </script>
</body>

</html>