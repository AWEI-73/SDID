# Implementation Plan - Story-6.0

**è¿­ä»£**: iter-6  
**Story ID**: Story-6.0  
**æ—¥æœŸ**: 2025-12-13  
**ç›®æ¨™æ¨¡çµ„**: flow-tools (UI)

> ğŸ“‹ **æ”¾ç½®ä½ç½®**: `.gems/iterations/iter-6/implementation_plan_Story-6.0.md`

---

## 1. Story ç›®æ¨™

**ä¸€å¥è©±ç›®æ¨™**: å»ºç«‹ç¯€é»æŒ‰éˆ•åŸºç¤å»ºè¨­ï¼Œè®“æ¯å€‹ç¯€é»å¡ç‰‡å…§éƒ½æœ‰æ“ä½œæŒ‰éˆ•

**ç¯„åœ**:
- âœ… åŒ…å«: UI æŒ‰éˆ•æ¡†æ¶ã€äº‹ä»¶ç¶å®šã€æŒ‰éˆ•ç‹€æ…‹ç®¡ç†
- âŒ ä¸åŒ…å«: å¯¦éš›å·¥å…·åŸ·è¡Œé‚è¼¯ï¼ˆStory-6.1~6.4ï¼‰

---

## 2. æ¨¡çµ„è³‡è¨Š

- **æ¨¡çµ„åç¨±**: flow-tools (å‰ç«¯ UI)
- **æ¨¡çµ„é¡å‹**: standard
- **æ¨¡çµ„è·¯å¾‘**: control-tower/public
- **æ˜¯å¦æ–°æ¨¡çµ„**: âŒ å¦ï¼ˆä¿®æ”¹ç¾æœ‰ UIï¼‰

---

## 3. å·¥ä½œé …ç›®

| Item | åç¨± | Type | Priority | æ˜ç¢ºåº¦ | é ä¼° |
|------|------|------|----------|--------|------|
| 1 | ç¯€é»æŒ‰éˆ• UI çµæ§‹ | FEATURE | P0 | âœ… æ˜ç¢º | 2-3h |
| 2 | æŒ‰éˆ•äº‹ä»¶ç¶å®š | FEATURE | P0 | âœ… æ˜ç¢º | 1-2h |
| 3 | æŒ‰éˆ•ç‹€æ…‹ç®¡ç† | FEATURE | P1 | âœ… æ˜ç¢º | 1-2h |

**åŸ·è¡Œé †åº**: Item 1 â†’ Item 2 â†’ Item 3

---

## 4. Item è©³ç´°è¦æ ¼

### Item 1: ç¯€é»æŒ‰éˆ• UI çµæ§‹

**Type**: FEATURE  
**Priority**: P0  
**æ˜ç¢ºåº¦**: âœ… æ˜ç¢º

**åŠŸèƒ½æè¿°**: åœ¨æ¯å€‹ç¯€é»å¡ç‰‡å…§ä¸Šæ–¹åŠ å…¥æ“ä½œæŒ‰éˆ•

**æª”æ¡ˆæ¸…å–®**:
| æª”æ¡ˆ | å‹•ä½œ | èªªæ˜ |
|------|------|------|
| `control-tower/public/index.html` | Modify | åŠ å…¥æŒ‰éˆ• HTML çµæ§‹ |
| `control-tower/public/styles.css` | Modify | æŒ‰éˆ•æ¨£å¼ |

**æ ¸å¿ƒåŠŸèƒ½**:
1. POC ç¯€é»: ã€ŒğŸš€ é–‹å§‹ POCã€æŒ‰éˆ•
2. PLAN ç¯€é»: ã€ŒğŸ“‹ ç”¢ç”Ÿæ¨£æ¿ã€æŒ‰éˆ•
3. BUILD ç¯€é»: ã€ŒğŸ“ Scaffoldã€æŒ‰éˆ•
4. SCAN ç¯€é»: ã€ŒğŸ” Scanã€å’Œã€ŒğŸ’¾ Backupã€æŒ‰éˆ•

**é©—æ”¶æ¨™æº–**:
- AC-6.0.1: æ¯å€‹ç¯€é»å¡ç‰‡å…§ä¸Šæ–¹æœ‰å°æ‡‰æŒ‰éˆ•
- AC-6.0.2: æŒ‰éˆ•ä½¿ç”¨ Emoji icon
- AC-6.0.3: æŒ‰éˆ•æ¨£å¼ç¬¦åˆè¨­è¨ˆï¼ˆprimary/secondaryï¼‰

---

### Item 2: æŒ‰éˆ•äº‹ä»¶ç¶å®š

**Type**: FEATURE  
**Priority**: P0  
**æ˜ç¢ºåº¦**: âœ… æ˜ç¢º

**åŠŸèƒ½æè¿°**: ç¶å®šæŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼Œé˜²æ­¢è§¸ç™¼å¡ç‰‡å±•é–‹

**æª”æ¡ˆæ¸…å–®**:
| æª”æ¡ˆ | å‹•ä½œ | èªªæ˜ |
|------|------|------|
| `control-tower/public/app.js` | Modify | åŠ å…¥äº‹ä»¶è™•ç†é‚è¼¯ |

**æ ¸å¿ƒå‡½å¼**:
1. `handlePocInit()` - POC åˆå§‹åŒ–è™•ç†
2. `handlePlanGenerate()` - PLAN æ¨£æ¿ç”¢ç”Ÿè™•ç†
3. `handleBuildScaffold()` - BUILD éª¨æ¶ç”¢ç”Ÿè™•ç†
4. `handleScanBackup()` - SCAN å‚™ä»½è™•ç†

**é©—æ”¶æ¨™æº–**:
- AC-6.0.4: é»æ“ŠæŒ‰éˆ•ä¸æœƒè§¸ç™¼å¡ç‰‡å±•é–‹
- AC-6.0.5: æŒ‰éˆ•é»æ“Šäº‹ä»¶æ­£ç¢ºç¶å®š
- AC-6.0.6: äº‹ä»¶è™•ç†å‡½å¼å·²å®šç¾©ï¼ˆç©ºå¯¦ä½œï¼‰

---

### Item 3: æŒ‰éˆ•ç‹€æ…‹ç®¡ç†

**Type**: FEATURE  
**Priority**: P1  
**æ˜ç¢ºåº¦**: âœ… æ˜ç¢º

**åŠŸèƒ½æè¿°**: æ ¹æ“šæµç¨‹ç‹€æ…‹åˆ‡æ›æŒ‰éˆ•æ¨£å¼ï¼ˆprimary/secondaryï¼‰

**æª”æ¡ˆæ¸…å–®**:
| æª”æ¡ˆ | å‹•ä½œ | èªªæ˜ |
|------|------|------|
| `control-tower/public/app.js` | Modify | åŠ å…¥ç‹€æ…‹ç®¡ç†é‚è¼¯ |

**æ ¸å¿ƒå‡½å¼**:
1. `updateButtonStates(currentPhase)` - æ›´æ–°æŒ‰éˆ•ç‹€æ…‹

**é©—æ”¶æ¨™æº–**:
- AC-6.0.7: ç•¶å‰å¯åŸ·è¡Œæ­¥é©Ÿä½¿ç”¨ primary æŒ‰éˆ•ï¼ˆè—è‰²ï¼‰
- AC-6.0.8: å…¶ä»–æ­¥é©Ÿä½¿ç”¨ secondary æŒ‰éˆ•ï¼ˆç°è‰²ï¼‰
- AC-6.0.9: æµç¨‹ç‹€æ…‹æ¨™é¡Œæ—é¡¯ç¤ºã€Œç›®å‰ä½æ–¼ iter-Xã€

---

## 5. è¦æ ¼æ³¨å…¥

### 5.1 è³‡æ–™å¥‘ç´„ (@GEMS-CONTRACT)

```typescript
// @GEMS-STORY: Story-6.0
// @GEMS-CONTRACT: NodeAction
interface NodeAction {
  nodeId: 'POC' | 'PLAN' | 'BUILD' | 'SCAN';
  buttonId: string;
  label: string;
  icon: string;
  handler: () => void;
  isPrimary: boolean;
}
```

### 5.2 UI è¦æ ¼ (@GEMS-UI)

```
GEMS-UI: NodeCard (Flex-Col) | Zones: [ButtonBar, NodeInfo, NodeDetails]
```

---

## 6. æª”æ¡ˆçµæ§‹å®šç¾©

```json
{
  "fileStructure": {
    "modules": [
      {
        "id": "flow-tools-ui",
        "path": "control-tower/public",
        "isNew": false,
        "files": [
          {
            "name": "index.html",
            "type": "ui",
            "action": "modify"
          },
          {
            "name": "app.js",
            "type": "ui",
            "action": "modify"
          },
          {
            "name": "styles.css",
            "type": "ui",
            "action": "modify"
          }
        ]
      }
    ]
  }
}
```

---

## 7. ä¾è³´é—œä¿‚

| ä¾è³´ | é¡å‹ | èªªæ˜ |
|------|------|------|
| ç¾æœ‰ UI æ¡†æ¶ | internal | åŸºæ–¼ç¾æœ‰ Control Tower UI |
| Vanilla JS | lib | ä¸ä½¿ç”¨æ¡†æ¶ |

---

## 8. æ¶æ§‹å¯©æŸ¥ (Constitution Audit)

| æª¢æŸ¥é …ç›® | çµæœ | èªªæ˜ |
|----------|------|------|
| **è¤‡é›œåº¦æª¢æ ¸** | âœ… é€šé | ç„¡æ–°ä¾è³´ï¼Œç´” UI ä¿®æ”¹ |
| **å°è£æª¢æ ¸** | âœ… é€šé | UI å±¤ç´šä¿®æ”¹ï¼Œå°è£é©ç•¶ |
| **P0 å‡½å¼æª¢æ ¸** | âœ… é€šé | 4 å€‹äº‹ä»¶è™•ç†å‡½å¼ï¼Œç¬¦åˆè¦ç¯„ |

---

## 9. é¢¨éšªè©•ä¼°

| Risk | Impact | Mitigation |
|------|--------|------------|
| æŒ‰éˆ•é»æ“Šè§¸ç™¼å¡ç‰‡å±•é–‹ | Medium | ä½¿ç”¨ stopPropagation() |
| æŒ‰éˆ•ç‹€æ…‹åˆ¤æ–·éŒ¯èª¤ | Low | æ¸…æ¥šçš„ç‹€æ…‹é‚è¼¯ + æ¸¬è©¦ |

---

**ç”¢å‡ºæ—¥æœŸ**: 2025-12-13 | **Agent**: PLAN
