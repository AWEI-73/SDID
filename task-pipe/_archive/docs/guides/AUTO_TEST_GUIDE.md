# ğŸ¤– Auto Test Runner - ä½¿ç”¨æŒ‡å—

å…¨è‡ªå‹•æ¸¬è©¦è…³æœ¬ï¼Œè®“ä½ ä¸ç”¨æ¯æ¬¡éƒ½æ‰‹å‹•è¼¸å…¥æŒ‡ä»¤ï¼

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. æœ€ç°¡å–®çš„æ–¹å¼ï¼ˆå¿«é€Ÿæ¸¬è©¦ï¼‰

```bash
node task-pipe/auto-test-runner.cjs --quick
```

é€™æœƒè‡ªå‹•ï¼š
- âœ… å»ºç«‹æ¸¬è©¦é …ç›® `test-qbank-1`
- âœ… åŸ·è¡Œ POC â†’ PLAN â†’ BUILD å®Œæ•´æµç¨‹
- âœ… è‡ªå‹•é‡è©¦å¤±æ•—çš„æ­¥é©Ÿï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- âœ… ä¸‰æ¬¡éŒ¯èª¤å¾Œè‡ªå‹•ç”¢ç”Ÿæ”¹å–„å»ºè­°
- âœ… ç”¢ç”Ÿè©³ç´°çš„æ¸¬è©¦å ±å‘Š

### 2. ä½¿ç”¨è‡ªè¨‚é…ç½®

```bash
node task-pipe/auto-test-runner.cjs --config=task-pipe/test-configs.json
```

### 3. æ¸¬è©¦æ‰€æœ‰é…ç½®

```bash
node task-pipe/auto-test-runner.cjs --all
```

---

## ğŸ“‹ é…ç½®æ–‡ä»¶æ ¼å¼

å‰µå»ºä½ è‡ªå·±çš„ `my-test-config.json`ï¼š

```json
[
  {
    "name": "my-project",
    "description": "æˆ‘çš„å°ˆæ¡ˆæè¿°",
    "level": "M",
    "objective": "å°ˆæ¡ˆç›®æ¨™",
    "features": [
      "åŠŸèƒ½ 1",
      "åŠŸèƒ½ 2"
    ],
    "phases": ["POC", "PLAN", "BUILD"]
  }
]
```

**æ¬„ä½èªªæ˜**:
- `name`: é …ç›®åç¨±ï¼ˆæœƒå»ºç«‹åŒåè³‡æ–™å¤¾ï¼‰
- `description`: é …ç›®æè¿°
- `level`: ç­‰ç´š (`S` | `M` | `L`)
- `objective`: ä¸€å¥è©±é¡˜æ™¯
- `features`: åŠŸèƒ½åˆ—è¡¨
- `phases`: è¦åŸ·è¡Œçš„éšæ®µ

---

## ğŸ›ï¸ é€²éšé¸é …

### æ¸…ç†èˆŠé …ç›®

```bash
node task-pipe/auto-test-runner.cjs --quick --clean
```

æ¯æ¬¡åŸ·è¡Œå‰æœƒåˆªé™¤èˆŠçš„æ¸¬è©¦é …ç›®ã€‚

### é¡¯ç¤ºè©³ç´°è¼¸å‡º

```bash
node task-pipe/auto-test-runner.cjs --quick --verbose
```

é¡¯ç¤ºæ¯å€‹æ­¥é©Ÿçš„å®Œæ•´è¼¸å‡ºã€‚

### éŒ¯èª¤æ™‚ç¹¼çºŒåŸ·è¡Œ

```bash
node task-pipe/auto-test-runner.cjs --quick --continue-on-error
```

å³ä½¿æŸå€‹æ­¥é©Ÿå¤±æ•—ï¼Œä¹Ÿæœƒç¹¼çºŒåŸ·è¡Œå¾ŒçºŒæ­¥é©Ÿã€‚

### è‡ªè¨‚é‡è©¦æ¬¡æ•¸

```bash
node task-pipe/auto-test-runner.cjs --quick --retries=5
```

è¨­å®šæ¯å€‹æ­¥é©Ÿæœ€å¤šé‡è©¦ 5 æ¬¡ï¼ˆé è¨­ 3 æ¬¡ï¼‰ã€‚

### çµ„åˆä½¿ç”¨

```bash
node task-pipe/auto-test-runner.cjs --quick --clean --verbose --retries=5
```

---

## ğŸ” éŒ¯èª¤è¿½è¹¤èˆ‡å›é¥‹æ©Ÿåˆ¶

### è‡ªå‹•éŒ¯èª¤è¿½è¹¤

è…³æœ¬æœƒè‡ªå‹•è¿½è¹¤æ¯å€‹éŒ¯èª¤ï¼š
- è¨˜éŒ„éŒ¯èª¤ç™¼ç”Ÿçš„éšæ®µå’Œæ­¥é©Ÿ
- çµ±è¨ˆæ¯å€‹éŒ¯èª¤çš„ç™¼ç”Ÿæ¬¡æ•¸
- ä¿å­˜éŒ¯èª¤çš„è©³ç´°è³‡è¨Š

### ä¸‰æ¬¡éŒ¯èª¤è‡ªå‹•å›é¥‹

ç•¶åŒä¸€å€‹éŒ¯èª¤ç™¼ç”Ÿ **3 æ¬¡** æ™‚ï¼Œæœƒè‡ªå‹•ï¼š

1. **é¡¯ç¤ºéŒ¯èª¤åˆ†æ**
   ```
   ğŸ”´ éŒ¯èª¤å›é¥‹æ©Ÿåˆ¶è§¸ç™¼
   éŒ¯èª¤ä½ç½®: POC-3
   ç™¼ç”Ÿæ¬¡æ•¸: 3 æ¬¡
   ```

2. **æä¾›æ”¹å–„å»ºè­°**
   ```
   ğŸ’¡ è‡ªå‹•åˆ†æèˆ‡å»ºè­°:
   - æª¢æ¸¬åˆ° BLOCKER éŒ¯èª¤ï¼Œå¯èƒ½æ˜¯å…§å®¹è³ªé‡ä¸è¶³
     å»ºè­°: åŸ·è¡Œå…§å®¹è³ªé‡æª¢æŸ¥å™¨æŸ¥çœ‹è©³ç´°å•é¡Œ
     æŒ‡ä»¤: node task-pipe/phases/poc/content-quality-checker.cjs
   ```

3. **ä¿å­˜å›é¥‹å ±å‘Š**
   ```
   ğŸ“„ å›é¥‹å ±å‘Šå·²ä¿å­˜: .gems/feedback-reports/POC-3_1704787200000.json
   ```

### å¸¸è¦‹éŒ¯èª¤è‡ªå‹•åˆ†æ

è…³æœ¬æœƒè‡ªå‹•è­˜åˆ¥ä¸¦æä¾›å»ºè­°ï¼š

| éŒ¯èª¤é¡å‹ | è‡ªå‹•å»ºè­° |
|---------|---------|
| BLOCKER | åŸ·è¡Œå…§å®¹è³ªé‡æª¢æŸ¥å™¨ |
| PENDING | æª¢æŸ¥è¼¸å‡ºæç¤ºï¼Œè£œå……ç¼ºå°‘çš„å…§å®¹ |
| æ‰¾ä¸åˆ°æª”æ¡ˆ | åŸ·è¡Œ scaffold ç”¢ç”Ÿå™¨ |
| é©—è­‰å¤±æ•— | æª¢æŸ¥ GEMS æ¨™ç±¤æ ¼å¼ |

---

## ğŸ“Š æ¸¬è©¦å ±å‘Š

### å³æ™‚è¼¸å‡º

åŸ·è¡Œéç¨‹ä¸­æœƒé¡¯ç¤ºï¼š
```
ğŸ”§ åŸ·è¡Œ POC Step 0...
   å˜—è©¦ 1/3: node task-pipe/runner.cjs --phase=POC --step=0 ...
   âœ… POC Step 0 æˆåŠŸ

ğŸ”§ åŸ·è¡Œ POC Step 1...
   å˜—è©¦ 1/3: node task-pipe/runner.cjs --phase=POC --step=1 ...
   âŒ å˜—è©¦ 1 å¤±æ•—: BLOCKER: Spec åªæ˜¯éª¨æ¶
   â³ ç­‰å¾… 2 ç§’å¾Œé‡è©¦...
   å˜—è©¦ 2/3: ...
```

### æœ€çµ‚å ±å‘Š

åŸ·è¡Œå®Œæˆå¾Œæœƒé¡¯ç¤ºï¼š
```
ğŸ“Š æ¸¬è©¦å ±å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
é …ç›®: test-qbank-1
é–‹å§‹æ™‚é–“: 2026-01-09T12:00:00Z
çµæŸæ™‚é–“: 2026-01-09T12:05:30Z

éšæ®µåŸ·è¡Œçµæœ:
  POC:
    âœ… Step 0: PASS (å˜—è©¦ 1 æ¬¡)
    âœ… Step 1: PASS (å˜—è©¦ 1 æ¬¡)
    âŒ Step 3: BLOCKER (å˜—è©¦ 3 æ¬¡)

éŒ¯èª¤çµ±è¨ˆ:
  ç¸½éŒ¯èª¤æ•¸: 5
  é‡è¤‡éŒ¯èª¤: 1 å€‹
  
  é‡è¤‡éŒ¯èª¤è©³æƒ…:
    - POC-3: 3 æ¬¡

ğŸ“„ å®Œæ•´å ±å‘Šå·²ä¿å­˜: .gems/test-reports/test-qbank-1_1704787200000.json
```

### å ±å‘Šæª”æ¡ˆä½ç½®

- **æ¸¬è©¦å ±å‘Š**: `.gems/test-reports/`
- **å›é¥‹å ±å‘Š**: `.gems/feedback-reports/`

---

## ğŸ’¡ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: å¿«é€Ÿé©—è­‰ POC æµç¨‹

```bash
# åªæ¸¬è©¦ POC éšæ®µ
node task-pipe/auto-test-runner.cjs --config=poc-only.json --clean
```

`poc-only.json`:
```json
[{
  "name": "test-poc",
  "description": "POC æ¸¬è©¦",
  "level": "S",
  "objective": "æ¸¬è©¦ POC æµç¨‹",
  "features": ["åŸºç¤åŠŸèƒ½"],
  "phases": ["POC"]
}]
```

### å ´æ™¯ 2: å£“åŠ›æ¸¬è©¦

```bash
# æ¸¬è©¦å¤šå€‹é …ç›®
node task-pipe/auto-test-runner.cjs --all --clean --continue-on-error
```

### å ´æ™¯ 3: é–‹ç™¼é™¤éŒ¯

```bash
# è©³ç´°è¼¸å‡ºï¼ŒéŒ¯èª¤æ™‚åœæ­¢
node task-pipe/auto-test-runner.cjs --quick --verbose
```

### å ´æ™¯ 4: CI/CD æ•´åˆ

```bash
# æ¸…ç†ã€ç¹¼çºŒåŸ·è¡Œã€ä¿å­˜å ±å‘Š
node task-pipe/auto-test-runner.cjs --all --clean --continue-on-error --retries=1
```

---

## ğŸ”§ è‡ªè¨‚æ“´å±•

### ä¿®æ”¹é è¨­é…ç½®

ç·¨è¼¯ `auto-test-runner.cjs` ä¸­çš„ `DEFAULT_CONFIGS`ï¼š

```javascript
const DEFAULT_CONFIGS = [
  {
    name: 'my-default-test',
    description: 'æˆ‘çš„é è¨­æ¸¬è©¦',
    level: 'M',
    // ...
  },
];
```

### æ–°å¢è‡ªå‹•è™•ç†é‚è¼¯

åœ¨ `handlePending()` æ–¹æ³•ä¸­æ–°å¢è‡ªå‹•è£œå……é‚è¼¯ï¼š

```javascript
async handlePending(phase, step, output) {
  if (phase === 'POC' && step === '3') {
    // è‡ªå‹•åŸ·è¡Œå…§å®¹è³ªé‡æª¢æŸ¥ä¸¦ä¿®å¾©
    // ...
  }
}
```

---

## ğŸ“ ç¯„ä¾‹å·¥ä½œæµç¨‹

### æ¯æ—¥è‡ªå‹•æ¸¬è©¦

```bash
#!/bin/bash
# daily-test.sh

echo "é–‹å§‹æ¯æ—¥è‡ªå‹•æ¸¬è©¦..."

# æ¸¬è©¦æ‰€æœ‰é…ç½®
node task-pipe/auto-test-runner.cjs --all --clean --continue-on-error

# æª¢æŸ¥å ±å‘Š
echo "æ¸¬è©¦å®Œæˆï¼Œæª¢æŸ¥å ±å‘Šï¼š"
ls -lh .gems/test-reports/
ls -lh .gems/feedback-reports/
```

### é–‹ç™¼å‰å¿«é€Ÿé©—è­‰

```bash
# å¿«é€Ÿæ¸¬è©¦ï¼Œç¢ºä¿æµç¨‹æ­£å¸¸
node task-pipe/auto-test-runner.cjs --quick --clean

# å¦‚æœæˆåŠŸï¼Œé–‹å§‹é–‹ç™¼
echo "æµç¨‹é©—è­‰æˆåŠŸï¼Œå¯ä»¥é–‹å§‹é–‹ç™¼ï¼"
```

---

## ğŸ¯ æœ€ä½³å¯¦è¸

1. **é–‹ç™¼å‰å…ˆæ¸¬è©¦**: ç¢ºä¿ task-pipe æµç¨‹æ­£å¸¸
2. **ä½¿ç”¨ --clean**: é¿å…èˆŠè³‡æ–™å¹²æ“¾
3. **æŸ¥çœ‹å›é¥‹å ±å‘Š**: ä¸‰æ¬¡éŒ¯èª¤å¾Œä¸€å®šè¦çœ‹å»ºè­°
4. **ä¿å­˜æ¸¬è©¦é…ç½®**: å°‡å¸¸ç”¨é…ç½®ä¿å­˜ç‚º JSON æª”æ¡ˆ
5. **å®šæœŸåŸ·è¡Œ**: è¨­å®šå®šæ™‚ä»»å‹™è‡ªå‹•æ¸¬è©¦

---

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œ: è…³æœ¬åŸ·è¡Œå¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥ Node.js ç‰ˆæœ¬
node --version  # éœ€è¦ >= 14

# æª¢æŸ¥ runner.cjs æ˜¯å¦å­˜åœ¨
ls task-pipe/runner.cjs
```

### å•é¡Œ: æ‰€æœ‰æ­¥é©Ÿéƒ½å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# å…ˆæ‰‹å‹•æ¸¬è©¦ä¸€æ¬¡
node task-pipe/runner.cjs --phase=POC --step=0 --target=test-manual

# æª¢æŸ¥éŒ¯èª¤è¨Šæ¯
```

### å•é¡Œ: å›é¥‹å ±å‘Šæ²’æœ‰ç”¢ç”Ÿ

**è§£æ±ºæ–¹æ¡ˆ**:
- ç¢ºä¿åŒä¸€å€‹éŒ¯èª¤ç™¼ç”Ÿè‡³å°‘ 3 æ¬¡
- æª¢æŸ¥ `.gems/feedback-reports/` ç›®éŒ„æ¬Šé™

---

**ç‰ˆæœ¬**: 1.0.0  
**å»ºç«‹æ—¥æœŸ**: 2026-01-09  
**ä½œè€…**: Task-Pipe Team
