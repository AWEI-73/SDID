<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <title>待辦事項 POC</title>
    <style>
        :root {
            --primary: #6366f1;
            --done: #10b981;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, sans-serif;
        }

        body {
            background: #f8fafc;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .input-row {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            cursor: pointer;
        }

        .todo-list {
            list-style: none;
        }

        .todo-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .todo-item.done {
            opacity: 0.5;
            text-decoration: line-through;
        }

        .checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .delete-btn {
            margin-left: auto;
            color: #ef4444;
            background: none;
            border: none;
            cursor: pointer;
        }
    </style>
    <!--
  @GEMS-DESIGN-BRIEF: 簡潔待辦清單，強調完成狀態視覺回饋
  @GEMS-CONTRACT-REF: ./ModuleContract.ts
  @GEMS-STORY: Story-1.0
  
  @GEMS-VERIFIED:
  - [x] 新增待辦
  - [x] 完成切換
  - [x] 刪除功能
  - [x] 列表顯示
  
  @GEMS-FIELD-COVERAGE:
  - id: frontend
  - title: frontend
  - completed: frontend
  - createdAt: api-only
  -->
</head>

<body>
    <div class="container">
        <h1>✅ 待辦事項</h1>
        <div class="input-row">
            <input type="text" id="todoInput" placeholder="新增待辦...">
            <button class="btn" onclick="addTodo()">新增</button>
        </div>
        <ul class="todo-list" id="todoList"></ul>
    </div>
    <script>
        // @GEMS-MOCK
        let todos = [
            { id: 't1', title: '完成 POC 設計', completed: true },
            { id: 't2', title: '撰寫測試案例', completed: false }
        ];

        // @GEMS-FUNCTION: addTodo | P0 | 新增待辦
        function addTodo() {
            const input = document.getElementById('todoInput');
            if (input.value.trim()) {
                todos.push({ id: 't' + Date.now(), title: input.value, completed: false });
                input.value = '';
                render();
            }
        }

        // @GEMS-FUNCTION: toggleTodo | P0 | 切換完成狀態
        function toggleTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) { todo.completed = !todo.completed; render(); }
        }

        // @GEMS-FUNCTION: deleteTodo | P0 | 刪除待辦
        function deleteTodo(id) {
            todos = todos.filter(t => t.id !== id);
            render();
        }

        // @GEMS-FUNCTION: render | P0 | 渲染列表
        function render() {
            const list = document.getElementById('todoList');
            list.innerHTML = todos.map(t => `
        <li class="todo-item ${t.completed ? 'done' : ''}">
          <input type="checkbox" class="checkbox" ${t.completed ? 'checked' : ''} onchange="toggleTodo('${t.id}')">
          <span>${t.title}</span>
          <button class="delete-btn" onclick="deleteTodo('${t.id}')">刪除</button>
        </li>
      `).join('');
        }
        render();
    </script>
</body>

</html>